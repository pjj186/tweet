(this.webpackJsonptweet=this.webpackJsonptweet||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(10),c=n(48),r=n.n(c),s=n(11),i=n(36),u=n(15),o=n(0),j=n.n(o),l=n(1),b=n(49),O=n(50),d=n(20),p=n(51),f=(Object(b.a)({apiKey:"AIzaSyCLyRNqW5KP1M4caQq3aqwpzJz0rEK2PDk",authDomain:"tweet-449b7.firebaseapp.com",projectId:"tweet-449b7",storageBucket:"tweet-449b7.appspot.com",messagingSenderId:"650140040425",appId:"1:650140040425:web:1048b977b71f25867e4478"}),Object(O.a)()),m=Object(d.e)(),x=Object(p.a)(),h=n(30),v=n(27),g=n(6),y=Object(u.f)((function(e){var t=e.refreshUser,n=e.history,c=e.setUserObject,r=e.userObj,i=Object(a.useState)(r.displayName),u=Object(s.a)(i,2),o=u[0],b=u[1],O=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(h.i)(Object(h.b)(m,"tweets"),Object(h.l)("creatorId","==",r.uid),Object(h.h)("createdAt","desc")),e.next=3,Object(h.e)(t);case 3:e.sent.forEach((function(e){console.log(e.id,"=>",e.data())}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){O()}),[]);var d=function(){var e=Object(l.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r.displayName===o){e.next=9;break}return e.t0=v.g,e.next=5,f.currentUser;case 5:return e.t1=e.sent,e.t2={displayName:o},e.next=9,(0,e.t0)(e.t1,e.t2);case 9:t();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("form",{onSubmit:d,className:"profileForm",children:[Object(g.jsx)("input",{onChange:function(e){var t=e.target.value;b(t)},value:o,autoFocus:!0,className:"formInput",type:"text",placeholder:"Display name"}),Object(g.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),Object(g.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){f.signOut(),c(null),n.push("/")},children:"Log Out"})]})})),w=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),u=i[0],o=i[1],b=Object(a.useState)(""),O=Object(s.a)(b,2),d=O[0],p=O[1],m=Object(a.useState)(""),x=Object(s.a)(m,2),h=x[0],y=x[1],w=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?o(a):"password"===n&&p(a)},N=function(){var e=Object(l.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!n){e.next=8;break}return e.next=5,Object(v.c)(f,u,d);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,Object(v.e)(f,u,d);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),y(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{onSubmit:N,className:"container",children:[Object(g.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:u,onChange:w,className:"authInput"}),Object(g.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:d,onChange:w,className:"authInput"}),Object(g.jsx)("input",{type:"submit",className:"authInput authSubmit",value:n?"Create Account":"Log In"}),h&&Object(g.jsx)("span",{className:"authError",children:h})]}),Object(g.jsx)("span",{onClick:function(){return c((function(e){return!e}))},className:"authSwitch",children:n?"Sign In":"Create Account"})]})},N=n(24),k=n(37),C=function(){var e=function(){var e=Object(l.a)(j.a.mark((function e(t){var n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new v.b:"github"===n&&(a=new v.a),e.next=4,Object(v.f)(f,a);case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"authContainer",children:[Object(g.jsx)(N.a,{icon:k.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"authBtns",children:[Object(g.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",Object(g.jsx)(N.a,{icon:k.b})]}),Object(g.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",Object(g.jsx)(N.a,{icon:k.a})]})]})]})},S=n(54),I=n(31),F=n(28),U=function(e){var t=e.tweetObj,n=e.isOwner,c=Object(a.useState)(!1),r=Object(s.a)(c,2),i=r[0],u=r[1],o=Object(a.useState)(t.text),b=Object(s.a)(o,2),O=b[0],p=b[1],f=Object(d.d)(m,"tweets","".concat(t.id)),h=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,Object(d.c)(f);case 4:return e.next=6,Object(F.a)(Object(F.d)(x,t.attachmentUrl));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){return u((function(e){return!e}))},y=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(d.j)(f,{text:O});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"tweet",children:i?Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{onSubmit:y,className:"container tweetEdit",children:[Object(g.jsx)("input",{type:"text",placeholder:"Edit your Tweet",value:O,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;p(t)},className:"formInput"}),Object(g.jsx)("input",{type:"submit",value:"Update Tweet",className:"formBtn"})]}),Object(g.jsx)("span",{onClick:v,className:"formBtn cancelBtn",children:"Cancel"})]})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(g.jsx)("img",{src:t.attachmentUrl,alt:"Avatar"}),n&&Object(g.jsxs)("div",{class:"tweet__actions",children:[Object(g.jsx)("span",{onClick:h,children:Object(g.jsx)(N.a,{icon:I.d})}),Object(g.jsx)("span",{onClick:v,children:Object(g.jsx)(N.a,{icon:I.a})})]})]})})},A=n(71),_=function(e){var t=e.userObj,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],i=c[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),b=o[0],O=o[1],p=Object(a.useRef)(),f=function(){var e=Object(l.a)(j.a.mark((function e(n){var a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),a="",""===b){e.next=11;break}return c=Object(F.d)(x,"".concat(t.uid,"/").concat(Object(A.a)())),e.next=8,Object(F.e)(c,b,"data_url");case 8:return e.next=10,Object(F.b)(c);case 10:a=e.sent;case 11:return s={text:r,createdAt:Object(d.i)(),creatorId:t.uid,attachmentUrl:a},e.next=14,Object(d.a)(Object(d.b)(m,"tweets"),s);case 14:i(""),O("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("form",{onSubmit:f,className:"factoryForm",children:[Object(g.jsxs)("div",{className:"factoryInput__container",children:[Object(g.jsx)("input",{className:"factoryInput__input",value:r,onChange:function(e){var t=e.target.value;i(t)},name:"tweet",type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(g.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),Object(g.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(g.jsx)("span",{children:"Add photos"}),Object(g.jsx)(N.a,{icon:I.b})]}),Object(g.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;O(t)},n.readAsDataURL(t)},ref:p,style:{opacity:0}}),b&&Object(g.jsxs)("div",{className:"factoryForm__attachment",children:[Object(g.jsx)("img",{src:b,style:{backgroundImage:b},alt:"Preview"}),Object(g.jsxs)("div",{className:"factoryFrom__clear",onClick:function(){O(""),p.current.value=null},children:[Object(g.jsx)("span",{children:"Remove"}),Object(g.jsx)(N.a,{icon:I.c})]})]})]})},B=function(e){var t=e.userObj,n=Object(a.useState)([]),c=Object(s.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){var e=Object(d.h)(Object(d.b)(m,"tweets"),Object(d.g)("createdAt","desc"));Object(d.f)(e,(function(e){var t=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())}));i(t)}))}),[]),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(_,{userObj:t}),Object(g.jsx)("div",{style:{marginTop:30},children:r.map((function(e){return Object(g.jsx)(U,{tweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},P=function(e){var t=e.userObj;return Object(g.jsx)("nav",{children:Object(g.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/",style:{marginRight:10},children:Object(g.jsx)(N.a,{icon:k.c,color:"#04AAFF",size:"2x"})})}),Object(g.jsx)("li",{children:Object(g.jsxs)(i.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(g.jsx)(N.a,{icon:I.e,color:"#04AAFF",size:"2x"}),Object(g.jsxs)("span",{style:{marginTop:10},children:[t.displayName,"\uc758 Profile"]})]})})]})})},E=function(e){var t=e.refreshUser,n=e.userObj,a=e.setUserObject;return Object(g.jsxs)(i.a,{children:[n&&Object(g.jsx)(P,{userObj:n}),Object(g.jsx)(u.c,{children:n?Object(g.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(g.jsx)(u.a,{exact:!0,path:"/",children:Object(g.jsx)(B,{userObj:n})}),Object(g.jsx)(u.a,{exact:!0,path:"/profile",children:Object(g.jsx)(y,{userObj:n,setUserObject:a,refreshUser:t})})]}):Object(g.jsx)(u.a,{exact:!0,path:"/",children:Object(g.jsx)(C,{})})})]})};var D=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),i=Object(s.a)(r,2),u=i[0],o=i[1];return Object(a.useEffect)((function(){f.onAuthStateChanged((function(e){console.log(e),e&&(null===e.displayName?o({displayName:"User",uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}):o({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})),c(!0)}))}),[]),Object(g.jsx)(g.Fragment,{children:n?Object(g.jsx)(E,{refreshUser:function(){var e=f.currentUser;o({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},userObj:u,setUserObject:o}):"Initializeing..."})};n(68);r.a.render(Object(g.jsx)(D,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.0f6a4cfc.chunk.js.map